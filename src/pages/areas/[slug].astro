---
import PageLayout from '../../layouts/PageLayout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const areas = await getCollection('areas');
  return areas.map((area) => ({
    params: { slug: area.id.replace(/\.md$/, '') },
    props: { area },
  }));
}

const { area } = Astro.props;
const { Content } = await area.render();
const { title, seoTitle, seoDescription, description } = area.data;
const areaSlug = area.id.replace(/\.md$/, '');

// Services offered in each area with links to service-area pages
const services = [
  {
    name: 'Garden Landscaping',
    desc: `Complete garden design and landscaping in ${title}.`,
    image: '/images/services/landscaping.jpg',
    link: `/garden-landscaping-${areaSlug}/`,
  },
  {
    name: 'Grass Cutting & Lawn Care',
    desc: `Regular grass cutting and lawn maintenance in ${title}.`,
    image: '/images/services/grass-cutting.jpg',
    link: `/grass-cutting-lawn-care-${areaSlug}/`,
  },
  {
    name: 'Hedge Trimming',
    desc: `Professional hedge trimming and shaping in ${title}.`,
    image: '/images/services/hedge-trimming.jpg',
    link: `/hedge-trimming-services-${areaSlug}/`,
  },
  {
    name: 'Decking',
    desc: `Custom decking design and installation in ${title}.`,
    image: '/images/gallery/gallery-46.jpg',
    link: `/decking-services-${areaSlug}/`,
  },
  {
    name: 'Fencing',
    desc: `Garden fencing installation and repair in ${title}.`,
    image: '/images/gallery/gallery-35.jpg',
    link: `/fencing-installation-${areaSlug}/`,
  },
  {
    name: 'Patio & Paving',
    desc: `Patio and paving installation in ${title}.`,
    image: '/images/services/paving.jpg',
    link: `/patio-paving-installation-${areaSlug}/`,
  },
  {
    name: 'Garden Clearance',
    desc: `Full garden clearance and waste removal in ${title}.`,
    image: '/images/services/garden-clearance.jpg',
    link: `/garden-clearance-${areaSlug}/`,
  },
];

// Sample gallery images for this area
const galleryImages = [
  '/images/gallery/gallery-29.jpg',
  '/images/gallery/gallery-31.jpg',
  '/images/gallery/gallery-35.jpg',
  '/images/gallery/gallery-30.jpg',
  '/images/gallery/gallery-42.jpg',
  '/images/gallery/gallery-36.jpg',
];
---

<PageLayout
  title={seoTitle || `Gardening Services in ${title} ‚Äî Gardening Services Dundalk`}
  description={seoDescription || `Professional gardening and landscaping services in ${title}, County Louth. Free quotes from Pete & Seamus.`}
>
  <section class="section section-green">
    <div class="container">
      <div class="section-header">
        <span class="section-badge">üìç {title}</span>
        <h1>Gardening Services in {title}</h1>
        <p class="section-subtitle">{description || `Professional gardening and landscaping in ${title} and surrounding areas.`}</p>
        <hr class="section-divider" />
      </div>
    </div>
  </section>

  <section class="section section-white">
    <div class="container-narrow">
      <div class="blog-content">
        <Content />
      </div>
    </div>
  </section>

  <!-- Services Grid -->
  <section class="section section-green">
    <div class="container">
      <h2 class="text-center" style="margin-bottom: 0.5rem;">Our Services in {title}</h2>
      <p class="text-center section-subtitle" style="margin-bottom: 2rem;">Click any service to learn more about what we offer in {title}.</p>
      <div class="services-grid">
        {services.map((service) => (
          <a href={service.link} class="service-card fade-in">
            <div class="service-card-img">
              <img src={service.image} alt={`${service.name} in ${title}`} loading="lazy" width="400" height="250" />
            </div>
            <div class="service-card-body">
              <h3>{service.name}</h3>
              <p>{service.desc}</p>
              <span class="service-card-link">Learn More ‚Üí</span>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- Sample Work Gallery -->
  <section class="section section-white">
    <div class="container">
      <h2 class="text-center" style="margin-bottom: 0.5rem;">Our Work Across County Louth</h2>
      <p class="text-center section-subtitle" style="margin-bottom: 2rem;">A sample of our recent projects in the area.</p>
      <div class="gallery-grid" style="max-width: 900px; margin: 0 auto;">
        {galleryImages.map((img, i) => (
          <div class="gallery-item fade-in">
            <img src={img} alt={`Garden project near ${title}, Co. Louth`} loading="lazy" width="400" height="300" />
          </div>
        ))}
      </div>
      <div class="text-center" style="margin-top: 1.5rem;">
        <a href="/gallery/" class="btn btn-cta">View Full Gallery</a>
      </div>
    </div>
  </section>

  <section class="cta-section">
    <div class="container fade-in">
      <h2>Need a Gardener in {title}?</h2>
      <p>Call us today for a free, no-obligation quote.</p>
      <a href="tel:+353851685170" class="cta-phone">085 168 5170</a>
      <div class="cta-buttons">
        <a href="tel:+353851685170" class="btn btn-cta btn-lg">Call Now</a>
        <a href={`https://wa.me/353851685170?text=Hi%2C%20I%27d%20like%20a%20quote%20for%20gardening%20services%20in%20${encodeURIComponent(title)}`} class="btn btn-whatsapp btn-lg" target="_blank" rel="noopener">WhatsApp Us</a>
        <a href="/contact/" class="btn btn-white btn-lg">Get a Free Quote</a>
      </div>
    </div>
  </section>
</PageLayout>
